---
title: 节点
permalink: /guide/core/node
categories:
  - 指南
tags:
  - 指南
---

无论在 MPE 还是 Pipeline 中，节点都是操作或编辑的主要对象，是数据的载体。

## 节点类型

目前，MPE 将节点分为“**字段节点**”与“**外部节点**”两种类型。

![](/images/core/节点类型.png)

### 字段节点

字段节点是最常见的节点，会直接被一对一的编译为 Pipeline 中的各个节点。

字段节点包含完整的四个端点与字段配置功能，相关操作可以回顾：

- [快速上手-端点](/guide/start/quick-start#端点)
- [快速上手-节点操作](/guide/start/quick-start#节点操作)

### 外部节点

外部节点仅由节点名字段与一个入口端点组成，用于表示其他文件中的节点。

由于 MPE 以 `json` 文件作为操作单位，字段节点无法描述也无需重复描述其他文件的节点，但仍然有许多复用或封装方案需要在 `next` 等字段中配置其他文件的节点，外部节点即在此类场景中发挥作用。

例如，您需要如下两个文件：

::: code-group

```json [main.json]
{
  "节点1": {
    /* ... */
    "next": "工具库_退出游戏"
  }
}
```

```json [utils.json]
{
  "工具库_退出游戏": {
    "action": {
      "type": "StopApp",
      "param": {
        "package": "packagename.example.com"
      }
    }
  }
}
```

:::

在 MPE 的 `main` 文件中，您可以如下布局：

![](/images/core/外部节点案例.png)

## 字段

字段是节点包含的各个键值对，在配置字段后，字段会被实时渲染在节点上。

### 字段类型

MPE 将 Pipeline 字段分为**一级字段**与**二级字段**。

一级字段包含 `recognition`、`action`、`others`、`extras`，其中，`others` 为 [属性字段](https://maafw.xyz/docs/3.1-PipelineProtocol.html#pipeline-v1) 中除 `recognition`、`action` 之外的所有字段的合集，`extras` 为属性字段外的自定义字段。

二级字段即一级字段的 params。

### 排序

在节点中，字段的排列是**整体有序，局部无序**的。

- **整体有序**：一级字段及各自包含的二级字段整体会按 `recognition`、`action`、`others`、`extras` 顺序排列
- **局部无序**：在一级字段中，各自的二级字段顺序会按创建顺序排列

