---
title: 连接
permalink: /guide/core/link
categories:
  - 指南
tags:
  - 指南
---

连接是 Pipeline 作为工作流的主要特征，通过配置连接可以灵活的控制节点关系，形成完整的操作流程。

## 连接类型

连接类型由出口端点决定，其颜色与出口端点一致，共以下三种连接:

- `next` 连接
- `jump_back` 连接
- `on_error` 连接

![](/images/core/连接.png)

例如如上连接方案会被编译为：

```json
{
  "节点1": {
    /* ... */
    "next": ["next1", "next2"],
    "jump_back": ["jump_back"],
    "on_error": ["on_error"]
  },
  "next1": {
    /* ... */
  },
  "jump_back": {
    /* ... */
  },
  "on_error": {
    /* ... */
  },
  "next2": {
    /* ... */
  }
}
```

## 连接操作

### 基础操作

相关操作可以回顾：

- [快速上手-连接操作](/guide/start/quick-start#连接操作)

### 连接曲率调整

MPE 支持自由拖拽连接的曲率，让您可以根据需要调整连接的形态，使复杂的节点关系更加清晰。

**使用方式**：

1. 将鼠标悬停在连接线上，连接的中点会出现一个可拖拽的**手柄**（控制点）
2. 点击并拖拽手柄，即可改变连接线的曲率和形状
3. 松开鼠标后，连接线会保持新的形态
4. 可以随时再次调整，或通过重新连接节点来重置连接形态

**应用场景**：

- 避免连接线相互重叠，提高可读性
- 在复杂的节点网络中区分不同的连接路径
- 优化视觉布局，使工作流更加美观
- 突出显示重要的连接关系

## 标签

标签指示了连接被编译为字段时的元素顺序，后添加的连接会在列表最后。

**您还可以通过点击连接唤起的连接面板快捷配置编译的顺序！**

## 连接面板

点击选中连接后，右上角会弹出连接设置面板，提供以下功能：

### 面板显示模式

连接面板同样支持三种显示模式：

- **固定模式（默认）**：面板固定显示在界面右上角
- **拖动模式** ：面板可拖动、可缩放，特性与字段面板一致
- **嵌入模式**：直接显示在连接中点右侧

**切换方式**：设置面板 → 面板配置 → 字段面板模式（与字段面板共用同一设置）

详细的拖动模式特性说明请参考 [字段面板-面板显示模式](/guide/core/field-panel#面板显示模式)。

### 基本信息

- **源节点**：显示连接的起始节点名称
- **目标节点**：显示连接的目标节点名称
- **连接类型**：显示连接类型（next、jump_back 或 on_error），并用不同颜色标识
  - `next` - 绿色
  - `jump_back` - 橙色
  - `on_error` - 洋红色（开启 JumpBack 后为紫色）

### 顺序调整

连接面板中可以直接调整连接的编译顺序：

- 使用数字输入框设置当前连接在同类型连接中的顺序
- 支持范围：1 到当前节点同类型连接的总数
- `next` 和 `jump_back` 连接共享顺序（因为编译后在同一列表）
- `on_error` 连接独立计数

### JumpBack 配置

对于 `on_error` 类型的连接，面板会额外显示 **JumpBack** 开关：

- 开启后，该 `on_error` 连接会添加 `jump_back` 属性
- 连接线颜色会从洋红色变为紫色，便于视觉区分
- 该配置影响错误处理后的跳转行为

### 删除连接

面板右上角提供删除按钮，点击可快速删除当前选中的连接。

## 连接安全

Pipeline 协议要求一个节点的 `next` 与 `on_error` 字段内的元素不可重复，既一个节点的 `next` 与 `on_error` 不能同时指向同一个节点，MPE 会直接拒绝此连接动作。

对于 `jump_back` 连接，由于实际在编译后与 next 在同一列表里，因此不允许与 `next` 同时指向同一个节点，MPE 会直接拒绝此连接动作。
